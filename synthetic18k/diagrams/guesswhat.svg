<svg viewBox="0 0 888 470" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <defs>
    <path id="arrow-left" d="M 0 0 C -2.779 1 -5.376 2.445 -7.69 4.28 L -6.14 0 L -7.69 -4.28 C -5.376 -2.445 -2.779 -1 0 0 Z" transform="rotate(180, 0, 0)"/>
    <path id="arrow-right" d="M 0 0 C -2.779 1 -5.376 2.445 -7.69 4.28 L -6.14 0 L -7.69 -4.28 C -5.376 -2.445 -2.779 -1 0 0 Z"/>
    <path id="arrow-down" d="M 0 0 C 1 2.779 2.445 5.376 4.28 7.69 L 0 6.14 L -4.28 7.69 C -2.444 5.376 -1 2.770 0 0 Z" transform="rotate(180, 0, 0)"/>
  </defs>
  <g transform="translate(10, 10)">
    <text x="0" y="30" dy="1em" class="figure-text">
      <tspan>
        The <tspan style="font-weight: bold;">linguistic pipeline</tspan> acts
      </tspan>
      <tspan x="0" dy="1.5em">
        as the FiLM generator and also
      </tspan>
      <tspan x="0" dy="1.5em">
        directly passes the question
      </tspan>
      <tspan x="0" dy="1.5em">
        representation to the rest
      </tspan>
      <tspan x="0" dy="1.5em">
        of the network.
      </tspan>
    </text>
    <text x="0" y="300" dy="1em" class="figure-text">
      <tspan>
        FiLM layers modulate the pre-
      </tspan>
      <tspan x="0" dy="1.5em">
        trained <tspan style="font-weight: bold;">visual pipeline</tspan> by
      </tspan>
      <tspan x="0" dy="1.5em">
        making the batch normalization
      </tspan>
      <tspan x="0" dy="1.5em">
        parameters query-dependent.
      </tspan>
    </text>
    <g transform="translate(200, 0)">
      <image x="0" y="316" width="64" height="64" style="clip-path: inset(0 0 0 0 round 6px);" xlink:href="images/guesswhat_input.jpg"/>
      <path d="M 64 348 L 95 348" class="figure-line"/>
      <use xlink:href="#arrow-right" transform="translate(95, 348)" class="figure-path"/>
      <g transform="translate(100, 288)" class="figure-faded">
        <rect width="60" height="120" class="figure-filmed-network figure-element figure-box"/>
        <text x="30" y="60" dy="0.4em" style="text-anchor: middle;" transform="rotate(-90, 30, 60)" class="figure-text">sub-network</text>
      </g>
      <path d="M 160 348 L 175 348" class="figure-line"/>
      <use xlink:href="#arrow-right" transform="translate(175, 348)" class="figure-path"/>
      <g transform="translate(180, 288)" class="figure-faded">
        <rect width="30" height="120" class="figure-filmed-network figure-element figure-box"/>
        <text x="15" y="60" dy="0.4em" style="text-anchor: middle;" transform="rotate(-90, 15, 60)" class="figure-text">normalization</text>
      </g>
      <path d="M 210 348 L 225 348" class="figure-line"/>
      <use xlink:href="#arrow-right" transform="translate(225, 348)" class="figure-path"/>
      <g transform="translate(230, 288)">
        <rect width="30" height="120" class="figure-filmed-network figure-element figure-box"/>
        <text x="15" y="60" dy="0.4em" style="font-weight: bold; text-anchor: middle;" transform="rotate(-90, 15, 60)" class="figure-text">FiLM layer</text>
      </g>
      <path d="M 260 348 L 275 348" class="figure-line"/>
      <use xlink:href="#arrow-right" transform="translate(275, 348)" class="figure-path"/>
      <g transform="translate(280, 288)" class="figure-faded">
        <rect width="60" height="120" class="figure-filmed-network figure-element figure-box"/>
        <text x="30" y="60" dy="0.4em" style="text-anchor: middle;" transform="rotate(-90, 30, 60)" class="figure-text">sub-network</text>
      </g>
      <path d="M 340 348 L 355 348" class="figure-line"/>
      <use xlink:href="#arrow-right" transform="translate(355, 348)" class="figure-path"/>
      <g transform="translate(360, 288)" class="figure-faded">
        <rect width="30" height="120" class="figure-filmed-network figure-element figure-box"/>
        <text x="15" y="60" dy="0.4em" style="text-anchor: middle;" transform="rotate(-90, 15, 60)" class="figure-text">normalization</text>
      </g>
      <path d="M 390 348 L 405 348" class="figure-line"/>
      <use xlink:href="#arrow-right" transform="translate(405, 348)" class="figure-path"/>
      <g transform="translate(410, 288)">
        <rect width="30" height="120" class="figure-filmed-network figure-element figure-box"/>
        <text x="15" y="60" dy="0.4em" style="font-weight: bold; text-anchor: middle;" transform="rotate(-90, 15, 60)" class="figure-text">FiLM layer</text>
      </g>
      <path d="M 440 348 L 455 348" class="figure-line"/>
      <use xlink:href="#arrow-right" transform="translate(455, 348)" class="figure-path"/>
      <g transform="translate(460, 288)" class="figure-faded">
        <rect width="60" height="120" class="figure-filmed-network figure-element figure-box"/>
        <text x="30" y="60" dy="0.4em" style="text-anchor: middle;" transform="rotate(-90, 30, 60)" class="figure-text">...</text>
      </g>
      <path d="M 175 410 L 175 420 L 265 420 L 265 410" style="stroke-width: 1px;" class="figure-line"/>
      <text x="175" y="420" dy="1.5em" class="figure-text">
        <tspan>
          conditional batch
        </tspan>
        <tspan x="175" dy="1.5em">
          normalization
        </tspan>
      </text>
      <path d="M 355 410 L 355 420 L 445 420 L 445 410" style="stroke-width: 1px;" class="figure-line"/>
      <text x="355" y="420" dy="1.5em" class="figure-text">
        <tspan>
          conditional batch
        </tspan>
        <tspan x="355" dy="1.5em">
          normalization
        </tspan>
      </text>
      <path d="M 520 348 L 575 348" class="figure-line"/>
      <use xlink:href="#arrow-right" transform="translate(575, 348)" class="figure-path"/>
      <g transform="translate(100, 100)">
        <rect width="420" height="40" class="figure-film-generator figure-element figure-box"/>
        <text x="210" y="20" dy="0.4em" style="font-weight: bold; text-anchor: middle;" class="figure-text">MLP</text>
      </g>
      <text x="100" y="150" dy="1em" class="figure-text">FiLM parameters</text>
      <path d="M 520 60 L 544 60 a 6 6 0 0 1 6 6 L 550 114 a 6 6 0 0 1 -6 6 L 525 120" class="figure-line"/>
      <use xlink:href="#arrow-left" transform="translate(525, 120)" class="figure-path"/>
      <path d="M 550 110 L 550 154 a 6 6 0 0 0 6 6 L 575 160" class="figure-line"/>
      <use xlink:href="#arrow-right" transform="translate(575, 160)" class="figure-path"/>
      <path d="M 245 140 L 245 283" class="figure-line"/>
      <use xlink:href="#arrow-down" transform="translate(245, 283)" class="figure-path"/>
      <path d="M 425 140 L 425 283" class="figure-line"/>
      <use xlink:href="#arrow-down" transform="translate(425, 283)" class="figure-path"/>
      <path d="M 490 140 L 490 283" class="figure-line"/>
      <use xlink:href="#arrow-down" transform="translate(490, 283)" class="figure-path"/>
      <g transform="translate(580, 100)" style="opacity: 0.6;">
        <rect width="40" height="308" style="fill: #e0e0e0;" class="figure-element figure-box"/>
        <text x="20" y="154" dy="0.4em" style="text-anchor: middle;" transform="rotate(-90, 20, 154)" class="figure-text">...</text>
      </g>
      <path d="M 620 254 L 650 254" class="figure-line"/>
      <use xlink:href="#arrow-right" transform="translate(650, 254)" class="figure-path"/>
      <g transform="translate(100, 30)">
        <g transform="translate(0, 0)">
          <text x="15" y="-30" style="text-anchor: middle;" class="figure-text">Is</text>
          <path d="M 15 -25 L 15 -5" class="figure-line"/>
          <use xlink:href="#arrow-down" transform="translate(15, -5)" class="figure-path"/>
          <g class="figure-faded">
            <rect width="30" height="60" class="figure-film-generator figure-element figure-box"/>
            <text x="15" y="30" dy="0.4em" style="text-anchor: middle;" transform="rotate(-90, 15, 30)" class="figure-text">LSTM</text>
          </g>
        </g>
        <path d="M 30 30 L 92.5 30" class="figure-line"/>
        <use xlink:href="#arrow-right" transform="translate(92.5, 30)" class="figure-path"/>
        <g transform="translate(97.5, 0)">
          <text x="15" y="-30" style="text-anchor: middle;" class="figure-text">the</text>
          <path d="M 15 -25 L 15 -5" class="figure-line"/>
          <use xlink:href="#arrow-down" transform="translate(15, -5)" class="figure-path"/>
          <g class="figure-faded">
            <rect width="30" height="60" class="figure-film-generator figure-element figure-box"/>
            <text x="15" y="30" dy="0.4em" style="text-anchor: middle;" transform="rotate(-90, 15, 30)" class="figure-text">LSTM</text>
          </g>
        </g>
        <path d="M 127.5 30 L 190 30" class="figure-line"/>
        <use xlink:href="#arrow-right" transform="translate(190, 30)" class="figure-path"/>
        <g transform="translate(195, 0)">
          <text x="15" y="-30" style="text-anchor: middle;" class="figure-text">umbrella</text>
          <path d="M 15 -25 L 15 -5" class="figure-line"/>
          <use xlink:href="#arrow-down" transform="translate(15, -5)" class="figure-path"/>
          <g class="figure-faded">
            <rect width="30" height="60" class="figure-film-generator figure-element figure-box"/>
            <text x="15" y="30" dy="0.4em" style="text-anchor: middle;" transform="rotate(-90, 15, 30)" class="figure-text">LSTM</text>
          </g>
        </g>
        <path d="M 225 30 L 287.5 30" class="figure-line"/>
        <use xlink:href="#arrow-right" transform="translate(287.5, 30)" class="figure-path"/>
        <g transform="translate(292.5, 0)">
          <text x="15" y="-30" style="text-anchor: middle;" class="figure-text">upside</text>
          <path d="M 15 -25 L 15 -5" class="figure-line"/>
          <use xlink:href="#arrow-down" transform="translate(15, -5)" class="figure-path"/>
          <g class="figure-faded">
            <rect width="30" height="60" class="figure-film-generator figure-element figure-box"/>
            <text x="15" y="30" dy="0.4em" style="text-anchor: middle;" transform="rotate(-90, 15, 30)" class="figure-text">LSTM</text>
          </g>
        </g>
        <path d="M 322.5 30 L 385 30" class="figure-line"/>
        <use xlink:href="#arrow-right" transform="translate(385, 30)" class="figure-path"/>
        <g transform="translate(390, 0)">
          <text x="15" y="-30" style="text-anchor: middle;" class="figure-text">down</text>
          <path d="M 15 -25 L 15 -5" class="figure-line"/>
          <use xlink:href="#arrow-down" transform="translate(15, -5)" class="figure-path"/>
          <g class="figure-faded">
            <rect width="30" height="60" class="figure-film-generator figure-element figure-box"/>
            <text x="15" y="30" dy="0.4em" style="text-anchor: middle;" transform="rotate(-90, 15, 30)" class="figure-text">LSTM</text>
          </g>
        </g>
      </g>
    </g>
  </g>
</svg>
