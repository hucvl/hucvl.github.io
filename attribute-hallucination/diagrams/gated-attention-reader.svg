<svg viewBox="0 0 704 340" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <defs>
    <path id="arrow-right" d="M 0 0 C -2.779 1 -5.376 2.445 -7.69 4.28 L -6.14 0 L -7.69 -4.28 C -5.376 -2.445 -2.779 -1 0 0 Z"/>
    <path id="arrow-up" d="M 0 0 C 1 2.779 2.445 5.376 4.28 7.69 L 0 6.14 L -4.28 7.69 C -2.444 5.376 -1 2.770 0 0 Z"/>
    <path id="arrow-down" d="M 0 0 C 1 2.779 2.445 5.376 4.28 7.69 L 0 6.14 L -4.28 7.69 C -2.444 5.376 -1 2.770 0 0 Z" transform="rotate(180, 0, 0)"/>
    <path id="column-top" d="M 0 6 a 6 6 0 0 1 6 -6 l 8 0 a 6 6 0 0 1 6 6 l 0 14 l -20 0 Z"/>
    <path id="column-middle" d="M 0 0 l 20 0 l 0 20 l -20 0 Z"/>
    <path id="column-bottom" d="M 0 0 l 20 0 l 0 14 a 6 6 0 0 1 -6 6 l -8 0 a 6 6 0 0 1 -6 -6 Z"/>
  </defs>
  <text x="10" y="10" dy="1em" class="figure-text">
    <tspan>
      Dhingra et al. use <tspan style="font-weight: bold;">conditional scaling</tspan> to
    </tspan>
    <tspan x="10" dy="1.5em">
      integrate query information into a document
    </tspan>
    <tspan x="10" dy="1.5em">
      processing network. Applying soft attention
    </tspan>
    <tspan x="10" dy="1.5em">
       to the
      <tspan style="font-weight: bold;">query representation tokens</tspan>
    </tspan>
    <tspan x="10" dy="1.5em">
    </tspan>
    <tspan x="10" dy="1.5em">
      produces the scaling vector.
    </tspan>
  </text>
  <text x="10" y="210" dy="1em" class="figure-text">
    <tspan>
      The scaling vector is then multiplied with
    </tspan>
    <tspan x="10" dy="1.5em">
      the input <tspan style="font-weight: bold;">document representation token</tspan>
    </tspan>
  </text>
  <g transform="translate(0, 10)">
    <text x="284" y="200" dy="-1.5em" style="font-weight: bold;" class="figure-text">
      <tspan>document</tspan>
      <tspan x="284" dy="1.5em">representation</tspan>
      <tspan x="284" dy="1.5em">token</tspan>
    </text>
    <g transform="translate(284, 230)">
      <use xlink:href="#column-top" transform="translate(0, 0)" class="figure-filmed-network figure-element"/>
      <use xlink:href="#column-middle" transform="translate(0, 20)" class="figure-filmed-network figure-element"/>
      <use xlink:href="#column-bottom" transform="translate(0, 40)" class="figure-filmed-network figure-element"/>
    </g>
    <path d="M 304 260 L 488 260" class="figure-line"/>
    <use xlink:href="#arrow-right" transform="translate(488, 260)" class="figure-path"/>
    <path d="M 304 260 L 428 260 A 6 6 0 0 0 434 254 L 434 125" class="figure-line"/>
    <use xlink:href="#arrow-up" transform="translate(434, 125)" class="figure-path"/>
    <g transform="translate(504, 260)">
      <circle r="10" class="figure-element"/>
      <ellipse rx="2" ry="2" class="figure-path"/>
    </g>
    <path d="M 514 260 L 599 260" class="figure-line"/>
    <use xlink:href="#arrow-right" transform="translate(599, 260)" class="figure-path"/>
    <text x="604" y="200" style="font-weight: bold;" class="figure-text">
      <tspan>output</tspan>
      <tspan x="604" dy="1.5em">token</tspan>
    </text>
    <g transform="translate(604, 230)">
      <use xlink:href="#column-top" transform="translate(0, 0)" class="figure-filmed-network figure-element"/>
      <use xlink:href="#column-middle" transform="translate(0, 20)" class="figure-filmed-network figure-element"/>
      <use xlink:href="#column-bottom" transform="translate(0, 40)" class="figure-filmed-network figure-element"/>
    </g>
    <text x="284" y="60" dy="-1.5em" style="font-weight: bold;" class="figure-text">
      <tspan>query</tspan>
      <tspan x="284" dy="1.5em">representation</tspan>
      <tspan x="284" dy="1.5em">tokens</tspan>
    </text>
    <g transform="translate(414, 0)">
      <rect width="40" height="120" class="figure-film-generator figure-element figure-box"/>
      <text x="20" y="60" dy="0.4em" style="text-anchor: middle;" transform="rotate(-90, 20, 60)" class="figure-text">soft attention</text>
    </g>
    <g transform="translate(494, 30)">
      <use xlink:href="#column-top" transform="translate(0, 0)" class="figure-film-generator figure-element"/>
      <use xlink:href="#column-middle" transform="translate(0, 20)" class="figure-film-generator figure-element"/>
      <use xlink:href="#column-bottom" transform="translate(0, 40)" class="figure-film-generator figure-element"/>
    </g>
    <path d="M 380 60  L 409 60" class="figure-line"/>
    <use xlink:href="#arrow-right" transform="translate(409, 60)" class="figure-path"/>
    <path d="M 455 60  L 489 60" class="figure-line"/>
    <use xlink:href="#arrow-right" transform="translate(489, 60)" class="figure-path"/>
    <path d="M 504 90 L 504 245" class="figure-line"/>
    <use xlink:href="#arrow-down" transform="translate(504, 245)" class="figure-path"/>
  </g>
</svg>
