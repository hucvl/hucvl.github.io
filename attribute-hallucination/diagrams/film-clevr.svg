<svg viewBox="0 0 888 500" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <defs>
    <path id="arrow-left" d="M 0 0 C -2.779 1 -5.376 2.445 -7.69 4.28 L -6.14 0 L -7.69 -4.28 C -5.376 -2.445 -2.779 -1 0 0 Z" transform="rotate(180, 0, 0)"/>
    <path id="arrow-right" d="M 0 0 C -2.779 1 -5.376 2.445 -7.69 4.28 L -6.14 0 L -7.69 -4.28 C -5.376 -2.445 -2.779 -1 0 0 Z"/>
    <path id="arrow-down" d="M 0 0 C 1 2.779 2.445 5.376 4.28 7.69 L 0 6.14 L -4.28 7.69 C -2.444 5.376 -1 2.770 0 0 Z" transform="rotate(180, 0, 0)"/>
  </defs>
  <g transform="translate(10, 10)" class="film-generator">
    <text x="0" y="30" dy="1em" class="figure-text">
      <tspan>
        The <tspan style="font-weight: bold;">linguistic pipeline</tspan>
      </tspan>
      <tspan x="0" dy="1.5em">
        acts as the FiLM generator.
      </tspan>
    </text>
    <text x="0" y="300" dy="1em" class="figure-text">
      <tspan>
        FiLM layers in each residual
      </tspan>
      <tspan x="0" dy="1.5em">
        block modulate the <tspan style="font-weight: bold;">visual</tspan>
      </tspan>
      <tspan x="0" dy="1.5em">
        <tspan style="font-weight: bold;">pipeline</tspan>.
      </tspan>
    </text>
    <g transform="translate(140, 0)">
      <image x="48" y="300" width="96" height="96" style="clip-path: inset(0 0 0 0 round 6px);" xlink:href="images/clevr_input.jpg"/>
      <g class="figure-faded">
        <path d="M 144 348 L 175 348" class="figure-line"/>
        <use xlink:href="#arrow-right" transform="translate(175, 348)" class="figure-path"/>
      </g>
      <g transform="translate(180, 288)" class="figure-faded">
        <rect width="50" height="120" class="figure-filmed-network figure-element figure-box"/>
        <text x="25" y="60" dy="0.4em" style="text-anchor: middle;" transform="rotate(-90, 25, 60)" class="figure-text">feature extractor</text>
      </g>
      <g class="figure-faded">
        <path d="M 230 348 L 420 348" class="figure-line"/>
        <path d="M 230 348 C 260 348 242.5 278 272.5 278" class="figure-line"/>
        <path d="M 362.5 278 C 392.5 278 380 348 420 348" class="figure-line"/>
        <use xlink:href="#arrow-right" transform="translate(420, 348)" class="figure-path"/>
      </g>
      <g transform="translate(272.5, 218)">
        <g transform="translate(0, 0)" class="figure-faded">
          <rect width="50" height="120" class="figure-filmed-network figure-element figure-box"/>
          <text x="25" y="60" dy="0.4em" style="text-anchor: middle;" transform="rotate(-90, 25, 60)" class="figure-text">sub-network</text>
        </g>
        <g class="figure-faded">
          <path d="M 50 60 L 60 60" class="figure-line"/>
        </g>
        <g transform="translate(60, 0)">
          <rect width="30" height="120" class="figure-filmed-network figure-element figure-box"/>
          <text x="15" y="60" dy="0.4em" style="font-weight: bold; text-anchor: middle;" transform="rotate(-90, 15, 60)" class="figure-text">FiLM layer</text>
        </g>
      </g>
      <g transform="translate(425, 288)" class="figure-faded">
        <rect width="30" height="120" class="figure-filmed-network figure-element figure-box"/>
        <text x="15" y="60" dy="0.4em" style="text-anchor: middle;" transform="rotate(-90, 15, 60)" class="figure-text">ReLU</text>
      </g>
      <path d="M 242.5 410 L 242.5 420 L 465 420 L 465 410" style="stroke-width: 1px;" class="figure-line"/>
      <text x="242.5" y="420" dy="1.5em" class="figure-text">
        <tspan>
          Each <tspan style="font-weight: bold;">residual block</tspan>
          has a
        </tspan>
        <tspan x="242.5" dy="1.5em">
          FiLM layer added to it.
        </tspan>
      </text>
      <g class="figure-faded">
        <path d="M 455 348 L 645 348" class="figure-line"/>
        <path d="M 455 348 C 485 348 467.5 278 497.5 278" class="figure-line"/>
        <path d="M 587.5 278 C 617.5 278 605 348 645 348" class="figure-line"/>
        <use xlink:href="#arrow-right" transform="translate(645, 348)" class="figure-path"/>
      </g>
      <g transform="translate(497.5, 218)">
        <g transform="translate(0, 0)" class="figure-faded">
          <rect width="50" height="120" class="figure-filmed-network figure-element figure-box"/>
          <text x="25" y="60" dy="0.4em" style="text-anchor: middle;" transform="rotate(-90, 25, 60)" class="figure-text">sub-network</text>
        </g>
        <g class="figure-faded">
          <path d="M 50 60 L 60 60" class="figure-line"/>
        </g>
        <g transform="translate(60, 0)">
          <rect width="30" height="120" class="figure-filmed-network figure-element figure-box"/>
          <text x="15" y="60" dy="0.4em" style="font-weight: bold; text-anchor: middle;" transform="rotate(-90, 15, 60)" class="figure-text">FiLM layer</text>
        </g>
      </g>
      <g transform="translate(650, 288)" class="figure-faded">
        <rect width="50" height="120" class="figure-filmed-network figure-element figure-box"/>
        <text x="25" y="60" dy="0.4em" style="text-anchor: middle;" transform="rotate(-90, 25, 60)" class="figure-text">...</text>
      </g>
      <g class="figure-faded">
        <path d="M 700 348 L 730 348" class="figure-line"/>
        <use xlink:href="#arrow-right" transform="translate(730, 348)" class="figure-path"/>
      </g>
      <g transform="translate(180, 100)">
        <rect width="520" height="40" class="figure-film-generator figure-element figure-box"/>
        <text x="260" y="20" dy="0.4em" style="font-weight: bold; text-anchor: middle;" class="figure-text">linear</text>
      </g>
      <text x="180" y="150" dy="1em" class="figure-text">FiLM parameters</text>
      <g class="figure-faded">
        <path d="M 700 60 L 724 60 a 6 6 0 0 1 6 6 L 730 114 a 6 6 0 0 1 -6 6 L 705 120" class="figure-line"/>
        <use xlink:href="#arrow-left" transform="translate(705, 120)" class="figure-path"/>
        <path d="M 675 140 L 675 283" class="figure-line"/>
        <use xlink:href="#arrow-down" transform="translate(675, 283)" class="figure-path"/>
      </g>
      <path d="M 347.5 140 L 347.5 213" class="figure-line"/>
      <use xlink:href="#arrow-down" transform="translate(347.5, 213)" class="figure-path"/>
      <path d="M 572.5 140 L 572.5 213" class="figure-line"/>
      <use xlink:href="#arrow-down" transform="translate(572.5, 213)" class="figure-path"/>
      <g transform="translate(180, 30)">
        <g transform="translate(0, 0)">
          <text x="15" y="-30" style="text-anchor: middle;" class="figure-text">Are</text>
          <g class="figure-faded">
            <path d="M 15 -25 L 15 -5" class="figure-line"/>
            <use xlink:href="#arrow-down" transform="translate(15, -5)" class="figure-path"/>
          </g>
          <g class="figure-faded">
            <rect width="30" height="60" class="figure-film-generator figure-element figure-box"/>
            <text x="15" y="30" dy="0.4em" style="text-anchor: middle;" transform="rotate(-90, 15, 30)" class="figure-text">GRU</text>
          </g>
        </g>
        <g class="figure-faded">
          <path d="M 30 30 L 76.66 30" class="figure-line"/>
          <use xlink:href="#arrow-right" transform="translate(76.66, 30)" class="figure-path"/>
        </g>
        <g transform="translate(81.66, 0)">
          <text x="15" y="-30" style="text-anchor: middle;" class="figure-text">there</text>
          <g class="figure-faded">
            <path d="M 15 -25 L 15 -5" class="figure-line"/>
            <use xlink:href="#arrow-down" transform="translate(15, -5)" class="figure-path"/>
          </g>
          <g class="figure-faded">
            <rect width="30" height="60" class="figure-film-generator figure-element figure-box"/>
            <text x="15" y="30" dy="0.4em" style="text-anchor: middle;" transform="rotate(-90, 15, 30)" class="figure-text">GRU</text>
          </g>
        </g>
        <g class="figure-faded">
          <path d="M 111.66 30 L 158.34 30" class="figure-line"/>
          <use xlink:href="#arrow-right" transform="translate(158.34, 30)" class="figure-path"/>
        </g>
        <g transform="translate(163.34, 0)">
          <text x="15" y="-30" style="text-anchor: middle;" class="figure-text">more</text>
          <g class="figure-faded">
            <path d="M 15 -25 L 15 -5" class="figure-line"/>
            <use xlink:href="#arrow-down" transform="translate(15, -5)" class="figure-path"/>
          </g>
          <g class="figure-faded">
            <rect width="30" height="60" class="figure-film-generator figure-element figure-box"/>
            <text x="15" y="30" dy="0.4em" style="text-anchor: middle;" transform="rotate(-90, 15, 30)" class="figure-text">GRU</text>
          </g>
        </g>
        <g class="figure-faded">
          <path d="M 193.34 30 L 240 30" class="figure-line"/>
          <use xlink:href="#arrow-right" transform="translate(240, 30)" class="figure-path"/>
        </g>
        <g transform="translate(245, 0)">
          <text x="15" y="-30" style="text-anchor: middle;" class="figure-text">cubes</text>
          <g class="figure-faded">
            <path d="M 15 -25 L 15 -5" class="figure-line"/>
            <use xlink:href="#arrow-down" transform="translate(15, -5)" class="figure-path"/>
          </g>
          <g class="figure-faded">
            <rect width="30" height="60" class="figure-film-generator figure-element figure-box"/>
            <text x="15" y="30" dy="0.4em" style="text-anchor: middle;" transform="rotate(-90, 15, 30)" class="figure-text">GRU</text>
          </g>
        </g>
        <g class="figure-faded">
          <path d="M 275 30 L 321.66 30" class="figure-line"/>
          <use xlink:href="#arrow-right" transform="translate(321.66, 30)" class="figure-path"/>
        </g>
        <g transform="translate(326.66, 0)">
          <text x="15" y="-30" style="text-anchor: middle;" class="figure-text">than</text>
          <g class="figure-faded">
            <path d="M 15 -25 L 15 -5" class="figure-line"/>
            <use xlink:href="#arrow-down" transform="translate(15, -5)" class="figure-path"/>
          </g>
          <g class="figure-faded">
            <rect width="30" height="60" class="figure-film-generator figure-element figure-box"/>
            <text x="15" y="30" dy="0.4em" style="text-anchor: middle;" transform="rotate(-90, 15, 30)" class="figure-text">GRU</text>
          </g>
        </g>
        <g class="figure-faded">
          <path d="M 356.66 30 L 403.34 30" class="figure-line"/>
          <use xlink:href="#arrow-right" transform="translate(403.34, 30)" class="figure-path"/>
        </g>
        <g transform="translate(408.34, 0)">
          <text x="15" y="-30" style="text-anchor: middle;" class="figure-text">yellow</text>
          <g class="figure-faded">
            <path d="M 15 -25 L 15 -5" class="figure-line"/>
            <use xlink:href="#arrow-down" transform="translate(15, -5)" class="figure-path"/>
          </g>
          <g class="figure-faded">
            <rect width="30" height="60" class="figure-film-generator figure-element figure-box"/>
            <text x="15" y="30" dy="0.4em" style="text-anchor: middle;" transform="rotate(-90, 15, 30)" class="figure-text">GRU</text>
          </g>
        </g>
        <g class="figure-faded">
          <path d="M 438.34 30 L 485 30" class="figure-line"/>
          <use xlink:href="#arrow-right" transform="translate(485, 30)" class="figure-path"/>
        </g>
        <g transform="translate(490, 0)">
          <text x="15" y="-30" style="text-anchor: middle;" class="figure-text">things</text>
          <g class="figure-faded">
            <path d="M 15 -25 L 15 -5" class="figure-line"/>
            <use xlink:href="#arrow-down" transform="translate(15, -5)" class="figure-path"/>
          </g>
          <g class="figure-faded">
            <rect width="30" height="60" class="figure-film-generator figure-element figure-box"/>
            <text x="15" y="30" dy="0.4em" style="text-anchor: middle;" transform="rotate(-90, 15, 30)" class="figure-text">GRU</text>
          </g>
        </g>
      </g>
    </g>
  </g>
</svg>
